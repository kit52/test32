"use strict";(self.webpackChunkproduction_project=self.webpackChunkproduction_project||[]).push([[517],{11:function(e,a,r){r.d(a,{I:function(){return o}});var t=r(7294),n=r(3007),s=r(5893);const o=(0,t.memo)((e=>{const{className:a,value:r,onChange:o,type:l="text",placeholder:c,autofocus:u,readonly:d,...i}=e,v=(0,t.useRef)(null),[m,g]=(0,t.useState)(!1),[f,h]=(0,t.useState)(0),p=m&&!d;return(0,t.useEffect)((()=>{var e;u&&(g(!0),null===(e=v.current)||void 0===e||e.focus())}),[u]),(0,s.jsxs)("div",{className:(0,n.A)("LuFDUWoP",{},[a]),children:[c&&(0,s.jsx)("div",{className:"emAQQ85i",children:"".concat(c,">")}),(0,s.jsxs)("div",{className:"y1GiFC_L",children:[(0,s.jsx)("input",{ref:v,type:l,value:r,onChange:e=>{null==o||o(e.target.value),h(e.target.value.length)},className:"LVdIPwcx",onFocus:()=>{g(!0)},onBlur:()=>{g(!1)},onSelect:e=>{var a;h((null==e||null===(a=e.target)||void 0===a?void 0:a.selectionStart)||0)},readOnly:d,...i}),p&&(0,s.jsx)("span",{className:"lqMFGBuL",style:{left:"".concat(9*f,"px")}})]})]})}))},2517:function(e,a,r){r.r(a),r.d(a,{default:function(){return I}});var t=r(2327),n=r(743),s=r(7294),o=r(3007),l=r(9499),c=r(11),u=r(8699),d=r(1233),i=r(5401);const v=e=>{var a;return(null==e||null===(a=e.loginForm)||void 0===a?void 0:a.username)||""},m=e=>{var a;return(null==e||null===(a=e.loginForm)||void 0===a?void 0:a.password)||""},g=e=>{var a;return(null==e||null===(a=e.loginForm)||void 0===a?void 0:a.isLoading)||!1},f=e=>{var a;return null==e||null===(a=e.loginForm)||void 0===a?void 0:a.error};var h=r(4268),p=r(4420),x=r(1283);const j=(0,h.hg)("login/loginByUsername",(async(e,a)=>{const{extra:r,dispatch:t,rejectWithValue:n}=a;try{const a=await r.api.post("/login",e);if(!a.data)throw new Error;return localStorage.setItem(x.z_,JSON.stringify(a.data)),t(p.hI.setAuthData(a.data)),a.data}catch(e){return console.log(e),n("error")}})),y=(0,h.oM)({name:"login",initialState:{isLoading:!1,username:"",password:""},reducers:{setUsername:(e,a)=>{e.username=a.payload},setPassword:(e,a)=>{e.password=a.payload}},extraReducers:e=>{e.addCase(j.pending,(e=>{e.error=void 0,e.isLoading=!0})).addCase(j.fulfilled,(e=>{e.isLoading=!1})).addCase(j.rejected,((e,a)=>{e.isLoading=!1,e.error=a.payload}))}}),{actions:N}=y,{reducer:C}=y;var w="PQPa1eB5",E=r(5893);const F={loginForm:C};var I=(0,s.memo)((e=>{let{className:a,onSuccess:r}=e;const{t:h}=(0,t.$)(),p=(0,i.T)(),x=(0,n.v9)(v),y=(0,n.v9)(m),C=(0,n.v9)(g),I=(0,n.v9)(f),L=(0,s.useCallback)((e=>{p(N.setUsername(e))}),[p]),S=(0,s.useCallback)((e=>{p(N.setPassword(e))}),[p]),b=(0,s.useCallback)((async()=>{"fulfilled"===(await p(j({username:x,password:y}))).meta.requestStatus&&r()}),[r,p,y,x]);return(0,E.jsx)(d.W,{removeAfterUnmount:!0,reducers:F,children:(0,E.jsxs)("div",{className:(0,o.A)("xYNEfcE9",{},[a]),children:[(0,E.jsx)(u.xv,{title:h("Форма авторизации")}),I&&(0,E.jsx)(u.xv,{text:h("Вы ввели неверный логин или пароль"),theme:u.lg.ERROR}),(0,E.jsx)(c.I,{autofocus:!0,type:"text",className:w,placeholder:h("Введите username"),onChange:L,value:x}),(0,E.jsx)(c.I,{type:"text",className:w,placeholder:h("Введите пароль"),onChange:S,value:y}),(0,E.jsx)(l.zx,{theme:l.bn.OUTLINE,className:"Ok_5amJo",onClick:b,disabled:C,children:h("Войти")})]})})}))},1233:function(e,a,r){r.d(a,{W:function(){return o}});var t=r(7294),n=r(743),s=r(5893);const o=e=>{const{children:a,reducers:r,removeAfterUnmount:o=!0}=e,l=(0,n.oR)(),c=(0,n.I0)();return(0,t.useEffect)((()=>{const e=l.reducerManager.getMountedReducers();return Object.entries(r).forEach((a=>{let[r,t]=a;e[r]||(l.reducerManager.add(r,t),c({type:"@INIT ".concat(r," reducer")}))})),()=>{o&&Object.entries(r).forEach((e=>{let[a,r]=e;l.reducerManager.remove(a),c({type:"@DESTROY ".concat(a," reducer")})}))}}),[]),(0,s.jsx)(s.Fragment,{children:a})}}}]);