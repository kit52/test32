"use strict";(self.webpackChunkproduction_project=self.webpackChunkproduction_project||[]).push([[785],{11:function(e,t,l){l.d(t,{I:function(){return r}});var a=l(7294),n=l(3007),s=l(5893);const r=(0,a.memo)((e=>{const{className:t,value:l,onChange:r,type:c="text",placeholder:i,autofocus:o,readonly:u,...d}=e,h=(0,a.useRef)(null),[v,x]=(0,a.useState)(!1),[m,p]=(0,a.useState)(0),g=v&&!u;return(0,a.useEffect)((()=>{var e;o&&(x(!0),null===(e=h.current)||void 0===e||e.focus())}),[o]),(0,s.jsxs)("div",{className:(0,n.A)("LuFDUWoP",{},[t]),children:[i&&(0,s.jsx)("div",{className:"emAQQ85i",children:"".concat(i,">")}),(0,s.jsxs)("div",{className:"y1GiFC_L",children:[(0,s.jsx)("input",{ref:h,type:c,value:l,onChange:e=>{null==r||r(e.target.value),p(e.target.value.length)},className:"LVdIPwcx",onFocus:()=>{x(!0)},onBlur:()=>{x(!1)},onSelect:e=>{var t;p((null==e||null===(t=e.target)||void 0===t?void 0:t.selectionStart)||0)},readOnly:u,...d}),g&&(0,s.jsx)("span",{className:"lqMFGBuL",style:{left:"".concat(9*m,"px")}})]})]})}))},5785:function(e,t,l){l.r(t),l.d(t,{default:function(){return A}});var a,n=l(2327),s=l(7294),r=l(743),c=l(5518),i=l(1554),o=l(9457),u=l(8699),d=l(3007),h={starIcon:"Z1C6YFZ0",normal:"Yv7EH3L0",hovered:"QpbxqwVr",selected:"ouStZWWc"},v=l(3895);function x(){return x=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var l=arguments[t];for(var a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a])}return e},x.apply(this,arguments)}var m=e=>s.createElement("svg",x({width:24,height:22,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),a||(a=s.createElement("path",{d:"M11.075 1.633c.32-.844 1.53-.844 1.852 0l2.07 5.734a.99.99 0 0 0 .926.633h5.087c.94 0 1.35 1.17.61 1.743L18 13a.968.968 0 0 0-.321 1.092L19 19.695c.322.9-.72 1.673-1.508 1.119l-4.917-3.12a1 1 0 0 0-1.15 0l-4.917 3.12c-.787.554-1.83-.22-1.508-1.119l1.322-5.603A.968.968 0 0 0 6 13L2.38 9.743C1.64 9.17 2.053 8 2.99 8h5.087a.989.989 0 0 0 .926-.633l2.07-5.734h0Z",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"}))),p=l(5893);const g=[1,2,3,4,5],j=(0,s.memo)((e=>{const{className:t,size:l=30,selectedStars:a=0,onSelect:n}=e,[r,c]=(0,s.useState)(a),[i,o]=(0,s.useState)(Boolean(a)),u=()=>{i||c(0)},x=e=>()=>{i||(null==n||n(e),c(e),o(!0))};return(0,p.jsx)("div",{className:(0,d.A)(h.StarRating,{},[t]),children:g.map((e=>{return(0,p.jsx)(v.J,{className:(0,d.A)(h.starIcon,{[h.selected]:i},[r>=e?h.hovered:h.normal]),Svg:m,width:l,height:l,onMouseLeave:u,onMouseEnter:(t=e,()=>{i||c(t)}),onClick:x(e),"data-selected":r>=e},e);var t}))})}));var f=l(4642),k=l(11),C=l(9499),b=l(1498);const y=(0,s.memo)((e=>{const{className:t,onAccept:l,feedbackTitle:a,hasFeedback:r,onCancel:d,title:h,rate:v=0}=e,{t:x}=(0,n.$)(),[m,g]=(0,s.useState)(!1),[y,S]=(0,s.useState)(v),[I,L]=(0,s.useState)(""),N=(0,s.useCallback)((e=>{S(e),r?g(!0):null==l||l(e)}),[r,l]),w=(0,s.useCallback)((()=>{g(!1),null==l||l(y,I)}),[I,l,y]),A=(0,s.useCallback)((()=>{g(!1),null==d||d(y)}),[d,y]),O=(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(u.xv,{title:a}),(0,p.jsx)(k.I,{value:I,onChange:L,placeholder:x("Ваш отзыв")})]});return(0,p.jsxs)(i.Z,{className:t,max:!0,children:[(0,p.jsxs)(o.g,{align:"center",gap:"8",max:!0,children:[(0,p.jsx)(u.xv,{title:y?x("Спасибо за оценку!"):h}),(0,p.jsx)(j,{selectedStars:y,size:40,onSelect:N})]}),(0,p.jsx)(c.I3,{children:(0,p.jsx)(f.u,{isOpen:m,lazy:!0,children:(0,p.jsxs)(o.g,{max:!0,gap:"32",children:[O,(0,p.jsxs)(o.U,{max:!0,gap:"16",justify:"end",children:[(0,p.jsx)(C.zx,{onClick:A,theme:C.bn.OUTLINE_RED,children:x("Закрыть")}),(0,p.jsx)(C.zx,{onClick:w,children:x("Отправить")})]})]})})}),(0,p.jsx)(c.$,{children:(0,p.jsx)(b.d,{isOpen:m,lazy:!0,onClose:A,children:(0,p.jsxs)(o.g,{gap:"32",children:[O,(0,p.jsx)(C.zx,{fullWidth:!0,onClick:w,size:C.qE.L,children:x("Отправить")})]})})})]})})),S=l(6628).p.injectEndpoints({endpoints:e=>({getArticleRating:e.query({query:e=>{let{articleId:t,userId:l}=e;return{url:"/article-ratings",params:{userId:l,articleId:t}}}}),rateArticle:e.mutation({query:e=>({url:"/article-ratings",method:"POST",body:e})})})}),I=S.useGetArticleRatingQuery,L=S.useRateArticleMutation;var N=l(4420),w=l(7050),A=(0,s.memo)((e=>{var t;const{className:l,articleId:a}=e,{t:c}=(0,n.$)(),i=(0,r.v9)(N.m5),{data:o,isLoading:u}=I({articleId:a,userId:null!==(t=null==i?void 0:i.id)&&void 0!==t?t:""}),[d]=L(),h=(0,s.useCallback)(((e,t)=>{try{var l;d({userId:null!==(l=null==i?void 0:i.id)&&void 0!==l?l:"",articleId:a,rate:e,feedback:t})}catch(e){console.log(e)}}),[a,d,null==i?void 0:i.id]),v=(0,s.useCallback)(((e,t)=>{h(e,t)}),[h]),x=(0,s.useCallback)((e=>{h(e)}),[h]);if(u)return(0,p.jsx)(w.O,{width:"100%",height:120});const m=null==o?void 0:o[0];return(0,p.jsx)(y,{onCancel:x,onAccept:v,rate:null==m?void 0:m.rate,className:l,title:c("Оцените статью"),feedbackTitle:c("Оставьте свой отзыв о статье, это поможет улучшить качество"),hasFeedback:!0})}))}}]);